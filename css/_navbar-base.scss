
/* - NAVBAR BASE STYLESHEET - */

.nav > li > a { transition: background 0.2s, color 0.2s; }

.navbar {
	width: 100%;
	margin-bottom: 0;
	border-radius: 0;
	border-width: 0;
	border-style: solid;
	border-bottom-width: 1px;
	border-color: $aqua-border;
	border-color: $aqua-border-alpha;
	background-repeat: repeat;
	background-position: center center;
	@include bg-color-alpha($aqua-bg, 0.95);

	.container {
		padding: 0 15px;
		border-color: inherit;
	}
	.navbar-inner { padding: 0; }
	.navbar-collapse.in { overflow-y: visible; }

	.navbar-header,
	.navbar-nav { margin: 0; }

	// NAV MENU

	.nav {
		> li > a {
			height: 50px;
			padding: 0 15px;
			line-height: 50px;

			.menu-label { vertical-align: middle; }
		}

		// Hover State

		> li > a:hover,
		> li:hover > a,
		> li.hover > a,
		.navbar-toggle:hover {
			background-color: $aqua-bg-hover;
		}

		// Active State

		> .active {
			> a,
			> a:hover,
			> a:focus {
				color: $aqua-accent;
				position: relative;
				border-color: transparent;
				background-color: transparent;
			}
		}

		&,
		&.active-top {
			> .active > a:before {
				position: absolute;
				left: 0; bottom: -1px;
				width: 100%;
				height: 3px;
				content: '';
				background-color: $aqua-accent;
			}
		}
		&.active-top > .active > a:before {
			top: -1px; bottom: auto;
		}

		&.active-left,
		&.active-right {
			> .active > a:before {
				top: 0;
				bottom: 0;
				width: 3px;
				height: auto;
			}
		}
		&.active-right > .active > a:before {
			left: auto; right: 0;
		}
		&.no-active > .active > a:before { display: none; }

		// Border Colors

		.nav > li,
		.nav > li > a,
		.navbar-toggle {
			border-color: $aqua-border;
			border-color: $aqua-border-alpha;
		}

		// Disabled State

		.disabled {
			> a {
				opacity: 0.6;
				cursor: default;
				background-color: transparent !important;
			}
			.sub-menu { display: none !important; }
		}
	}

	&.no-hover-bg {
		.nav > li > a:hover,
		.nav > li:hover > a,
		.nav > li.hover > a,
		.navbar-toggle:hover { background-color: transparent !important; }
	}

	// Menu Icons

	.menu-icon {
		font-size: 16px;
		vertical-align: middle;
		margin-right: 8px;

		&:last-child { margin-right: 0; }

		&:after:empty { display: none; }
	}

	// Menu Button

	.menu-btn {
		.btn-cont {
			display: inline-block;
			vertical-align: middle;
		}
		.btn {
			height: 100%;
			padding: 5px 15px;

			i, span { vertical-align: middle; }
		}
	}

	// Text Color

	.nav > li > a,
	.text-cont,
	.text-cont a:hover,
	.text-cont a.no-color { color: $aqua-color; }

	.nav > li > a:hover,
	.text-cont a { color: $aqua-accent; }

	// DROPDOWN MENUS

	.nav > li > a,
	.sub-menu > li > a {
		font-weight: 500;
	}

	// Standard Dropdown Menus

	.nav > li > .sub-menu {
		margin-top: 10px;
	}

	// Submenus

	.sub-menu {
		display: block;
		padding: 0;
		border-radius: 0;
		background-clip: content-box;
		visibility: hidden; opacity: 0;
		box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
		transition: visibility 0.2s, opacity 0.2s, margin 0.2s;
		transition-delay: 0.15s;
		@include bg-color-alpha($aqua-menu-bg, 0.95);

		li > a {
			max-height: 37px;
			text-overflow: ellipsis;
			overflow: hidden;
			transition: background 0.3s, color 0.3s;

			&:hover { background-color: $aqua-menu-bg-hover; }

			&:focus { background-color: transparent; }
		}

		li > a,
		li .menu-item > a,
		.mega-menu-column li > a {
			clear: both;
			padding: 10px;
			font-size: 13px;
			font-weight: 500;
			line-height: 16px;
			border-bottom: 1px solid;
		}

		li > a,
		input { color: $aqua-menu-color; }

		&,
		> li,
		> li > a {
			border-color: $aqua-menu-border;
			border-color: $aqua-menu-border-alpha;
		}

		li > a:hover,
		.active > a,
		.active > a:hover {
			color: $aqua-accent;
		}

		li.disabled {
			opacity: 0.8;

			.sub-menu { display: none !important; }
		}

		li:last-child > a,
		.mega-menu-column li:last-child > a {
			border-bottom-width: 0;
		}

		.menu-item:hover,
		.menu-item.hover {
			z-index: 2;

			> .sub-menu {
				left: 100%;
				visibility: visible;
				opacity: 1;

				&.drop-left {
					left: auto; right: 100%;
				}
			}
		}
	}

	.menu-item:hover,
	.menu-item.hover {
		> .sub-menu {
			margin-top: 0;
			visibility: visible;
			opacity: 1;
			transition-delay: 0.3s;
		}
	}

	// Mega Menus

	.mega-menu {

		> .sub-menu {
			width: auto;
			display: table;

			> li {
				min-width: 160px;
				display: table-cell;
				vertical-align: top;
				border-width: 0;
				border-style: solid;
				border-right-width: 1px;

				> a {
					height: 44px;
					max-height: 44px;
					padding-top: 13px;
					font-size: 14px;
				}

				&:nth-child(4n),
				&:nth-child(n-4):last-child {
					border-right-width: 0;
				}
			}

			&.multi-row {
				display: block;
				min-width: 680px;

				> li {
					width: 25%;
					float: left;
					display: block;
					border-top-width: 1px;

					&:nth-child(-n+4) {
						border-top-width: 0;
					}
				}
			}
		}

		.mega-menu-column {
			> a { background-color: $aqua-menu-bg-hover; }

			> .sub-menu {
				visibility: inherit;
				opacity: 1;
				transition: visibility 0s;
				background-color: transparent;
			}

			&:last-child > a {
				border-bottom-width: 1px;
			}
		}
	}

	.mega-menu:hover > .sub-menu,
	.mega-menu.hover > .sub-menu {
		display: table !important;

		&.multi-row {
			display: block !important;
		}
	}

	// Submenu Dropping On The Left

	.dropdown > .sub-menu.drop-left,
	.dropdown:last-child > .sub-menu {
		left: auto; right: 0;
	}

	// Level 2+ Submenus

	.drop-submenu {
		position: relative;
		z-index: 1;

		.sub-menu {
			position: absolute;
			top: -1px; left: 0;
			min-width: 120px;
			border-width: 1px;
			border-style: solid;
			visibility: hidden;
			opacity: 0;
			z-index: -1;

			&.drop-left {
				left: auto; right: 0;
			}
		}

		> .sub-menu {
			transition: visibility 0.3s, opacity 0.3s, left 0.1s ease 0.3s, right 0.1s ease 0.3s, top 0.1s ease 0.3s;
		}

		&:hover > .sub-menu,
		&.hover > .sub-menu {
			transition: visibility 0.2s, opacity 0.2s, left 0.2s, right 0.2s, top 0.2s;
			transition-delay: 0.15s;
		}
	}

	// Submenu Drop Arrows

	.drop-arrow {
		font-size: 10px;
		margin-left: 5px;
		vertical-align: middle;
	}

	.drop-submenu {
		&.arrow-right {
			> a { padding-right: 30px !important; }
		}

		&.arrow-left {
			> a { padding-left: 30px !important; }

			.drop-arrow {
				right: auto; left: 10px;
			}
			.drop-arrow:before { content: '\f489'; }
		}

		.drop-arrow {
			position: absolute;
			top: 50%; right: 10px;
			margin: -8px 0 0;
		}
	}

	// OTHER ELEMENTS

	.navbar-toggle .icon-bar {
		background-color: $aqua-color;
	}

	// Divider
	.divider {
		width: 1px;
		opacity: 0.5;
		margin: 0 10px;
		border-width: 0 !important;
		background-color: $aqua-border;
		background-color: $aqua-border-alpha;
	}

	// Nav Search Form
	.nav-search {
		.sub-menu { width: 300px; }

		.search-form {
			input, button {
				border-width: 0;
				border-radius: 0;
				margin-left: 0;
				background: transparent;
				box-shadow: none !important;
			}

			button {
				color: $aqua-menu-color;
				border-left-width: 1px;
				border-color: $aqua-menu-border;
				border-color: $aqua-menu-border-alpha;
			}

			::placeholder { color: $aqua-menu-color-fade; }
		}
	}

	// Message displayed when no menu is assigned to a location
	.no-menu-msg {
		float: right;
		margin: 0;
		font-weight: 500;
	}

	// DARK BACKGROUND

	&.bg-dark {

		// Text Colors

		.nav > li > a,
		.text-cont,
		.text-cont a:hover,
		.text-cont a.no-color {
			color: $aqua-bg-dark-color;
		}

		.navbar-toggle .icon-bar {
			background-color: $aqua-bg-dark-color;
		}

		// Border Colors

		.nav > li,
		.nav > li > a,
		.navbar-toggle {
			border-color: $aqua-bg-dark-border;
			border-color: $aqua-bg-dark-border-alpha;
		}

		// Divider

		.divider {
			background-color: $aqua-bg-dark-border;
			background-color: $aqua-bg-dark-border-alpha;
		}
	}

	// NAV DESKTOP STYLING

	@include media('screen', 'mars') {
		.no-label > a {
			> .menu-label { display: none; }
			> .menu-icon { margin-right: 0; }
		}
	}

	// TOP NAV MOBILE STYLING

	@include media('screen', '<mars') {

		&.navbar-mixt {
			.navbar-inner {
				background-color: $aqua-menu-bg;
			}

			.navbar-inner .text-cont,
			.navbar-inner .text-cont a:hover,
			.navbar-inner .text-cont a.no-color,
			.nav > li > a {
				color: $aqua-menu-color;
			}

			// Hover State

			.nav > li > a:hover,
			.nav > li:hover > a,
			.nav > li.hover > a {
				background-color: $aqua-menu-bg-hover;
			}

			.nav > li:hover > a,
			.nav > li.hover > a,
			.nav > li > a:hover,
			.nav > li.active > a,
			.navbar-inner .text-cont a { color: $aqua-accent; }

			// Border Colors

			.navbar-inner,
			.nav > li,
			.nav > li > a {
				border-color: $aqua-menu-border;
				border-color: $aqua-menu-border-alpha;
			}

			// Menu Expanded State
			.nav li.expand,
			.nav li.expand .sub-menu a:hover {
				background-color: $aqua-menu-expand;
			}
		}
	};
}

.navbar:not(.navbar-mixt) {
	.mega-menu-column > a .drop-arrow { display: none !important; }
}

// Used by jquery to check which media queries are active
#navbar-check {
	width: 0; height: 0;
	display: none;
}


// NAVBAR THEMES

// Nightly Theme

.navbar.theme-nightly {
	border-color: $aqua-border;
	border-color: $aqua-border-alpha;
	@include bg-color-alpha($aqua-bg, 0.95);

	// Text Colors

	.nav > li > a,
	.text-cont,
	.text-cont a:hover,
	.text-cont a.no-color {
		color: $aqua-color;
	}

	.text-cont a,
	.nav > li > a:hover,
	.nav > .active > a,
	.nav > .active > a:hover {
		color: $aqua-accent;
	}

	.navbar-toggle .icon-bar {
		background-color: $aqua-color;
	}

	// Border Colors

	.nav > li,
	.nav > li > a,
	.navbar-toggle {
		border-color: $aqua-border;
		border-color: $aqua-border-alpha;
	}

	// Hover State

	.nav > li > a:hover,
	.nav > li:hover > a,
	.nav > li.hover > a,
	.navbar-toggle:hover {
		background-color: $aqua-bg-hover;
	}

	// Active State

	.nav > .active > a:before {
		background-color: $aqua-accent;
	}

	// Submenus

	.sub-menu {
		@include bg-color-alpha($aqua-menu-bg, 0.95);

		li > a,
		input,
		.search-form button {
			color: $aqua-menu-color;
		}

		li > a:hover {
			background-color: $aqua-menu-bg-hover;
		}

		li > a:hover,
		.active > a,
		.active > a:hover {
			color: $aqua-accent;
		}

		&,
		> li,
		> li > a,
		.search-form button {
			border-color: $aqua-menu-border;
			border-color: $aqua-menu-border-alpha;
		}

		.search-form ::placeholder { color: $aqua-menu-color-fade; }
	}

	.mega-menu > .sub-menu > li > a {
		background-color: $aqua-menu-bg-hover;
	}

	// Divider

	.divider {
		background-color: $aqua-border;
		background-color: $aqua-border-alpha;
	}

	// DARK BACKGROUND

	&.bg-dark {

		// Text Colors

		.nav > li > a,
		.text-cont,
		.text-cont a:hover,
		.text-cont a.no-color {
			color: $aqua-bg-dark-color;
		}

		.navbar-toggle .icon-bar {
			background-color: $aqua-bg-dark-color;
		}

		// Border Colors

		.nav > li,
		.nav > li > a,
		.navbar-toggle {
			border-color: $aqua-bg-dark-border;
			border-color: $aqua-bg-dark-border-alpha;
		}

		// Hover & Active State

		.nav > li:hover > a,
		.nav > li.hover > a,
		.nav > li > a:hover,
		.nav > .active > a,
		.text-cont a {
			color: $aqua-accent;
		}

		> .active > a:before {
			background-color: $aqua-bg-dark-accent;
		}

		// Divider

		.divider {
			background-color: $aqua-bg-dark-border;
			background-color: $aqua-bg-dark-border-alpha;
		}
	}

	@include media('screen', '<mars') {

		&.navbar-mixt {
			.navbar-inner {
				background-color: $aqua-menu-bg;
			}

			.navbar-inner .text-cont,
			.navbar-inner .text-cont a:hover,
			.navbar-inner .text-cont a.no-color,
			.nav > li > a {
				color: $aqua-menu-color;
			}

			// Hover State

			.nav > li > a:hover,
			.nav > li:hover > a,
			.nav > li.hover > a {
				background-color: $aqua-menu-bg-hover;
			}

			.nav > li:hover > a,
			.nav > li.hover > a,
			.nav > li > a:hover,
			.nav > li.active > a,
			.navbar-inner .text-cont a { color: $aqua-accent; }

			// Border Colors

			.navbar-inner,
			.nav > li,
			.nav > li > a {
				border-color: $aqua-menu-border;
				border-color: $aqua-menu-border-alpha;
			}

			// Menu Expanded State
			.nav li.expand,
			.nav li.expand .sub-menu a:hover {
				background-color: $aqua-menu-expand;
			}
		}
	};
}

// Nightly

$nightly-bg: #444;
$nightly-bg-alpha: rgba(50,50,50,0.95);
$nightly-border: $border-color-dark;
$nightly-border-alpha: $border-color-dark-alpha;

$nightly-hover-bg: rgba(255,255,255,0.04);

$nightly-menu-bg: #4a4a4a;
$nightly-menu-hover-bg: $nightly-hover-bg;

$nightly-menu-color: #eee;
$nightly-menu-color-fade: #bbb;

.navbar.theme-nightly {
	border-color: $nightly-border;
	border-color: $nightly-border-alpha;
	background-color: $nightly-bg;
	background-color: $nightly-bg-alpha;

	.text-cont,
	.nav > li > a {
		color: $nightly-menu-color;
		text-shadow: 0 1px 1px rgba(0,0,0,0.4);
	}

	.nav {
		> li {
			border-color: $nightly-border;
		}

		> li:hover {
			> a,
			> a:hover,
			> a:focus {
				color: $aqua-accent;
				background-color: $nightly-hover-bg;
			}
		}

		> .disabled {
			> a,
			> a:hover,
			> a:focus {
				color: $nightly-menu-color-fade !important;
			}
		}

		.divider {
			background-color: $nightly-border;
			background-color: $nightly-border-alpha;
		}
	}

	// Submenu Styling
	
	.sub-menu {
		border-color: $nightly-border;
		border-color: $nightly-border-alpha;
		background-color: $nightly-menu-bg;

		li > a {
			color: $nightly-menu-color;
			border-color: $nightly-border;
			text-shadow: 0 1px 1px darken($nightly-bg, 10);
		}
		li:hover,
		li.active:hover {
			> a,
			> a:hover,
			> a:focus {
				color: $aqua-accent;
				background-color: $nightly-menu-hover-bg;
			}
		}
		li.active {
			> a,
			> a:hover,
			> a:focus {
				color: $aqua-accent;
				border-color: $aqua-accent;
			}
		}
	}

	.drop-menu .sub-menu,
	.mega-menu-column .sub-menu {
		.drop-submenu {
			.sub-menu { background-color: darken($nightly-menu-bg, 3); }
		}
	}

	.mega-menu {
		> .sub-menu > li > a {
			color: $nightly-menu-color-fade;
			background-color: rgba(0,0,0,0.08);
		}
	}

	.drop-submenu .sub-menu { background-color: darken($nightly-menu-bg, 3); }

	.nav-search .search-form {
		::placeholder { color: $text-light-color; }
	}
}